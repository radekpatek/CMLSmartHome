
-- Visual Studio 
dotnet publish -r debian-arm -f netcoreapp2.0

sudo mount -t cifs -o username=Share,password=share //NB/source

cp -avr /mnt/smb/repos/CMLSmartHome /home/pi/VSProjects

sudo rm -r /var/aspnetcore/CMLSmartHome/*
sudo cp -avr /mnt/smb/repos/CMLSmartHome/CMLSmartHome/bin/Debug/netcoreapp2.0/debian-arm/ /var/aspnetcore/CMLSmartHome

c:\Users\Radek\source\repos\CMLSmartHome\CMLSmartHome\bin\Debug\netcoreapp2.0\debian-x64\

cd /var/aspnetcore/CMLSmartHome/debian-arm/publish/

./var/aspnetcore/CMLSmartHome/CMLSmartHome.dll

sudo nano /etc/systemd/system/CMLSmartHome.service
sudo journalctl -fu CMLSmartHome.service
sudo journalctl -fu CMLSmartHomeCollector.service

systemctl enable CMLSmartHome.service
systemctl start CMLSmartHome.service
systemctl status CMLSmartHome.service

systemctl status WebAPITest.service
sudo journalctl -fu WebAPITest.service

sudo nano /etc/systemd/system/CMLSmartHome.service
sudo nano /etc/systemd/system/CMLSmartHomeWeb.service
sudo nano /etc/systemd/system/CMLSmartHomeCollector.service
sudo nano /etc/systemd/system/WebAPITest.service

DB
------------
GRANT ALL PRIVILEGES ON smarthome.* TO 'root'@'localhost'; 

VisualStudio
------------
1.krok add-migration
2.krok update-database -verbose

WebApp - propojen√≠ webapi s www
https://www.youtube.com/watch?v=wYMdqhid4Fs

WWW:
sudo nano /etc/nginx/sites-available/default
---- CMLSmartHome --------------------------------------------------------
NB: dotnet publish -r debian-arm -f netcoreapp2.0
NB: dotnet publish C:\Users\Radek\source\repos\CMLSmartHome\CMLSmartHome.sln -r debian-arm -f netcoreapp2.1
PI:
sudo service nginx stop
sudo journalctl -fu CMLSmartHome.service -e
sudo systemctl stop CMLSmartHome.service
sudo rm -r /var/aspnetcore/CMLSmartHome/*
sudo cp -avr /mnt/smb/repos/CMLSmartHome/CMLSmartHome/bin/Debug/netcoreapp2.1/debian-arm/publish/* /var/aspnetcore/CMLSmartHome
sudo systemctl start CMLSmartHome.service
sudo service nginx start
sudo ./CMLSmartHomeDeploy.sh

---- CMLSmartHomeWeb --------------------------------------------------------
PI:
sudo service nginx stop
systemctl stop CMLSmartHomeWeb.service
sudo rm -r /var/aspnetcore/CMLSmartHomeWeb/*
sudo cp -avr /mnt/smb/repos/CMLSmartHome/CMLSmartHomeWeb/bin/Debug/netcoreapp2.1/debian-arm/publish/* /var/aspnetcore/CMLSmartHomeWeb
systemctl enable CMLSmartHomeWeb.service
systemctl start CMLSmartHomeWeb.service
sudo ./CMLSmartHomeWebDeploy.sh

---- CMLSmartHomeCollector --------------------------------------------------------
PI:
sudo service nginx stop
sudo systemctl stop CMLSmartHomeCollector.service
sudo rm -r /var/aspnetcore/CMLSmartHomeCollector/*
sudo cp -avr /mnt/smb/repos/CMLSmartHome/CMLSmartHomeCollector/bin/Debug/netcoreapp2.1/debian-arm/publish/* /var/aspnetcore/CMLSmartHomeCollector
sudo systemctl enable CMLSmartHomeCollector.service
sudo systemctl start CMLSmartHomeCollector.service
sudo systemctl status CMLSmartHomeCollector.service
sudo journalctl -fu CMLSmartHomeCollector.service -e
sudo ./CMLSmartHomeCollectorDeploy.sh


---- WebAPITest --------------------------------------------------------
NB: dotnet publish C:\Users\Radek\source\repos\WebAPITest\WebAPITest.sln -r debian-arm -f netcoreapp2.1
PI:
systemctl disenable WebAPITest.service
sudo service nginx stop
systemctl stop WebAPITest.service
sudo rm -r /var/aspnetcore/WebAPITest/*
sudo cp -avr /mnt/smb/repos/WebAPITest/WebAPITest/bin/Debug/netcoreapp2.1/debian-arm/publish/* /var/aspnetcore/WebAPITest
systemctl enable WebAPITest.service
systemctl start WebAPITest.service
sudo service nginx start

------------ SQL 
CREATE TABLE `Dashboard` (
    `Id` bigint NOT NULL AUTO_INCREMENT,
    `InternalCollectorId` bigint NULL,
    `OutdoorCollectorId` bigint NULL,
    CONSTRAINT `PK_Dashboard` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Dashboard_Collectors_InternalCollectorId` FOREIGN KEY (`InternalCollectorId`) REFERENCES `Collectors` (`Id`) ON DELETE NO ACTION,
    CONSTRAINT `FK_Dashboard_Collectors_OutdoorCollectorId` FOREIGN KEY (`OutdoorCollectorId`) REFERENCES `Collectors` (`Id`) ON DELETE NO ACTION
);
CREATE INDEX `IX_Dashboard_InternalCollectorId` ON `Dashboard` (`InternalCollectorId`);
CREATE INDEX `IX_Dashboard_OutdoorCollectorId` ON `Dashboard` (`OutdoorCollectorId`);
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20181103122640_20181103', '2.1.2-rtm-30932');


